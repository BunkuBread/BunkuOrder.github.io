<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bunku Bread Order Form</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Leaflet CSS for map (if you use the map modal) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    /* Minimal styling for clarity */
    body { font-family: Arial, sans-serif; margin: 2em; }
    label { display: block; margin-top: 1em; }
    input, select, button { margin-top: 0.5em; padding: 0.5em; width: 100%; max-width: 400px; }
    .input-error { border: 2px solid red; }
    .fee-note { color: #888; font-size: 0.9em; }
    #orderSummary { margin-top: 1em; }
    .info-tooltip { position: absolute; background: #222; color: #fff; padding: 8px 12px; border-radius: 4px; z-index: 10; display: none; }
    #mapModal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.5); }
    #mapModalContent { background: #fff; margin: 5% auto; padding: 1em; border-radius: 8px; width: 90vw; max-width: 600px; position: relative; }
    #map { width: 100%; height: 300px; }
    #closeMapModal { position: absolute; top: 8px; right: 12px; cursor: pointer; font-size: 1.2em; }
  </style>
</head>
<body>

  <h1>Bunku Bread Order Form</h1>

  <form id="orderForm" autocomplete="off">
    <label for="firstName">First Name:</label>
    <input type="text" id="firstName" name="firstName" required />

    <label for="lastName">Last Name:</label>
    <input type="text" id="lastName" name="lastName" required />

    <label for="phone">Phone Number:</label>
    <input type="tel" id="phoneInput" name="phone" placeholder="05X XXX-XXXX" required />

    <label>Order Type:</label>
    <label><input type="radio" name="orderType" value="pickup" checked /> Pickup</label>
    <label><input type="radio" name="orderType" value="delivery" /> Delivery</label>

    <!-- Pickup-only fields -->
    <div id="pickupFields">
      <label for="licensePlate">Car License Plate (for pickup):</label>
      <input type="text" id="licensePlate" name="licensePlate" />
    </div>

    <!-- Delivery-only fields -->
    <div id="deliveryFields" style="display:none;">
      <label for="cityInput">City:</label>
      <input type="text" id="cityInput" name="city" />

      <label for="streetInput">Street:</label>
      <input type="text" id="streetInput" name="street" />

      <label for="villa">Villa/Apartment:</label>
      <input type="text" id="villa" name="villa" />

      <label for="locationInput">Map Location:</label>
      <input type="text" id="locationInput" name="location" readonly placeholder="Click to select on map" />
      <button type="button" id="locateMeBtn">Locate Me</button>
    </div>

    <label for="boxesInput">
      Number of Boxes:
      <span id="infoIcon" style="cursor:help;" title="Each box contains 4 pieces of bread.">ℹ️</span>
    </label>
    <input type="number" id="boxesInput" name="boxes" min="1" max="30" value="1" required />
    <select id="boxesSelect" style="margin-top:0.5em;"></select>

    <label for="special">Special Instructions:</label>
    <input type="text" id="special" name="special" placeholder="Anything else we should know?" />

    <!-- Date Picker -->
    <label for="orderDate"><b>Date you want your bread:</b></label>
    <input type="date" id="orderDate" name="orderDate" required />

    <div id="orderSummary"></div>

    <button type="submit">Submit Order</button>
  </form>

  <!-- Map Modal -->
  <div id="mapModal" aria-hidden="true">
    <div id="mapModalContent">
      <span id="closeMapModal" title="Close">&times;</span>
      <h3>Select Your Location</h3>
      <div id="map"></div>
      <button type="button" id="confirmLocation">Confirm Location</button>
    </div>
  </div>

  <!-- Leaflet JS (for map) -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <!-- Supabase JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <!-- Your main JS -->
  <script src="script.js"></script>
</body>
</html>
